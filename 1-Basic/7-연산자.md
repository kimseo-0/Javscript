# 7. 연산자
연산자는 `하나 이상의 표현식`을 대상으로 `연산`을 수행해 하나의 값을 만든다.
이때 연산의 대상자인 표현식을 `피연산자`라 한다. (피연산자는 표현식이므로 값으로 평가 가능)
> 하나의 '값'을 만드므로 연산자와 피연산자로 이루어진 연산자 표현식도 표현식이다.

#### 예제 07-01
```
// 산술 연산자
5 * 4

// 문자열 연결 연산자
'My name is ' + 'Lee'

// 할당 연산자
color = 'red'

// 비교 연산자
3 > 5

// 논리 연산자
true && false

// 타입 연산자
3 > 5
typeof 'Hi'
```

## 7.1 산술 연산자
산술 연산자는 피연산자를 대상으로 수학적 계사을 수행해 새로운 숫자 값을 만든다.
산술 연산이 불가능한 경우, NaN을 반환한다.

산술 연산자는 피연산자의 개수에 따라 `이항 산술 연산자`와 `단항 산술 연산자`로 구분할 수 있다.
### 7.1.1 이항 산술 연산자
2개의 피연산자를 산술 연산하여 숫자 값을 만든다.

|이항 산술 연산자|의미|부수 효과|
|:---:|:----:|:---:|
|+|덧셈|X|
|-|뺄셈|X|
|*|곱셈|X|
|/|나눗셈|X|
|%|나머지|X|

#### 예제 07-02
```
5 + 2   // → 7
5 - 2   // → 3
5 * 2   // → 10
5 / 2   // → 2.5
5 % 2   // → 1
```

### 7.1.2 단항 산술 연산자
1개의 피연산자를 산술 연산하여 숫자 값을 만든다.

|단항 산술 연산자|의미|부수 효과|
|:---:|:----:|:---:|
|++|증가|O|
|--|감소|O|
|+|어떠한 효과도 없다. 음수를 양수로 반전하지도 않는다.|X|
|-|양수를 음수로, 음수를 양수로 반전한 값을 반환|X|

#### 예제 07-03
```
var x = 1;
x++;    // x = x + 1
console.log(x); // 2

x--;    // x = x - 1
console.log(x); // 1
```
증가/감소(++/--) 연산자는 피연산자의 값을 변경하는 부수 효과가 있다.

#### 예제 07-04
```
var x = 5, result;

// 선할당 후증가
result = x++;
console.log(result, x); // 5 6

// 선증가 후할당
result = ++x;
console.log(result, x); // 7 7

// 선할당 후감소
result = x--;
consol.log(result, x); // 7 6

// 선감소 후할당
result = --x;
consol.log(result, x);  // 5 5
```
증가/감소(++/--) 연산자는 위치에 따라 의미가 다르다.

- 피연산자 앞에 위치한 전위 증가/감소 연산자 : 먼저 피연산자의 값을 증가/감소시킨 후, 다른 연산 수행
- 피연산자 뒤에 위치한 후위 증가/감소 연산자 : 먼저 다른 연산 수행 후, 피연산자의 값을 증가/감소

#### 예제 07-05 ~ 07-07
```
// 아무런 부수 효과 없음

// 효과 없음
+10;    // → 10
+(-10); // → -10

// 부호 반전
-(-10); // → 10

var x = '1'

// 문자열을 숫자로 타입 변환한다.

```
숫자 타입이 아닌 피연산자에 +/- 단항 연산자를 사용하면 피연산자를 숫자 타입으로 반환한다.
피연산자 자체를 변경하는 것이 아니라 숫자 타입으로 변환한 값을 생성해서 반환한다.(부수 효과 없음)

### 7.1.3 문자열 연결 연산자
\+ 연산자는 피연산자 중 하나 이상이 문자열인 경우 문자열 연결 연산자로 동작한다.
> 그 이외의 경우는 산술 연산자로 동작

``` 
'1' + 2;        // '12'

1 + 2           // 3

1 + true        // 2, true 는 1로 타입 변환

1 + false       // 1, false 는 0으로 타입 변환

1 + null        // 1, null 은 0으로 타입 변환

// undefined 는 숫자로 타입 변환되지 않는다.
+undefined      // NaN
1 + undefined   // NaN
```

> 📝 암묵적 타입 변환 vs 타입 강제 변환   
> `9장 타입 변환과 단축 평가` 참고

## 7.2 할당 연산자
우항에 있는 피연산자의 평가 결과를 좌항에 있는 변수에 할당한다.
변수 값이 변하는 부수효과 있음

|할당 연산자|예|동일 표현|
|---|---|---|
|=|x = 5|x = 5|
|+=|x += 5|x = x + 5|
|-=|x -= 5|x = x - 5|
|*=|x *= 5|x = x * 5|
|/=|x /= 5|x = x / 5|
|%=|x %= 5|x = x % 5|

#### 예제 07-09
``` 
var str = 'Lee';
str += 'Lee'
console.log(str)    // 'My name is Lee'
```

#### 예제 07-10
할당문은 표현식인 문일까, 표현식이 아닌 문일까?
``` 
var x;
console.log(x = 10);
```
할당문은 값으로 평가될 것 같지 않지만, 실제로 위 예제의 출력값은 10이다.
즉, 할당문은 값으로 평가되는 표현식으로 변수에 할당된 값으로 평가된다.

#### 예제 07-11
다음과 같이 여러 변수에 동일한 값을 연쇄 할당 할 수 있다.
``` 
var a, b, c;

console.log(a = b = c = 10);    // 10

console.log(a, b, c)            // 10 10 10
```
1. c = 10 : c 에 10이 할당되고, 10으로 평가
2. b = 10 : b 에 10이 할당되고, 10으로 평가
3. a = 10 : a 에 10이 할당되고, 10으로 평가

## 7.3 비교 연산자
좌항과 우항의 피연산자를 비교하고, 그 결과를 불리언 값으로 반환한다.

### 7.3.1 동등/일치 비교 연산자
좌항과 우항의 피연산자가 같은 값으로 평가되는지 비교해 불리언 값을 반환한다.

동등 비교와 일치 비교 비교의 엄격성의 정도가 다르다

|비교 연산자|의미|설명|
|---|---|---|
|==| 동등 비교 | x와 y 의 값이 같음 |
|===| 일치 비교 | x와 y 의 값과 타입이 같음 |
|!=| 부동등 비교 | x와 y 의 값이 다름 |
|!==| 부일치 비교 | x와 y 의 값과 타입이 다름 |

동등 비교 연산자는 좌항과 우항의 피연산자를 비교할때 
먼저 암묵적 타입 변환을 통해 타입을 일치시킨 후 같은 값인지 비교한다.

#### 예제 07-12, 07-14
``` 
// 동등 비교
5 == 5;      // true
5 == '5';    // true

// 일치 비교
5 === 5;     // true
5 === '5';   // false
```

### 예제 07-13
개발자의 의도와 상관 없이 자바스크립트 엔진에 의해 암묵적으로 타입이 자동 변화된기 때문에,
예측하기 어려운 결과를 만들기도 한다.
따라서 동등 비교 연산보다는, 일치 비교 연산을 권장한다.

```
// 예측하기 어려운 동등 비교 연산
0 == '';     // true
'0' == '';   // false
```

### 예제 07-15 ~ 07-17
일치 비교 연산에서 주의해야 할 것
``` 
// 자기 자신과 일치하지 않는 유일한 값
NaN === NaN;        // false

// 해당 값이 NaN 인지 확인하기 위해서는 빌트인 함수 Number.isNaN 을 사용한다.
Number.isNaN(NaN)   // true

// 양의 0과 음의 0
0 === -0;    // true
0 == -0      // true
```

> 📝 ES6 : Object.is method
> ES6에서 도입된 메서드로 예측가능한 정확한 비교 결과를 반환한다.
> 그 이외는 비교 연산자와 동일하게 동작한다.
> ##### 예제 07-18 
>```
> Object.is(0, -0);     // false
> 
> Object.is(NaN, NaN);  // true
> ```

### 예제 07-19
부동등 비교연산자와 불일치 비교연산자는 동등 비교연산자와 일치 비교연산자의 반대 개념이다.
```
5 != 8  // true
5 != 5  // false

5 !== '5'   // true
5 !== 5     // false     
```

## 7.4 삼항 조건 연산자
조건식의 평가 결과에 따라 반환할 값을 결정한다.
```
조건식 ? 조건식이 true 일 때 반환할 값 : 조건식이 false 일 때 반환할 값
```

``` 
var result = socre >= 60 ? 'pass' : 'fail';
```
`score` >= 60 의 평가 결과가 true 이면 'pass',
`score` >= 60 의 평가 결과가 false 이면 'fail' 을 반환한다.  

> 조건식 : 불리언 값으로 평가될 수 있는 표현식

#### 예제 07-21
`조건식` 부분의 표현식은 불리언 타입의 값으로 평가되어야 하는데, 만약 평가 결과가
불리언 값이 아니면 불리언 값으로 암묵적 타입 변환된다.

``` 
var x = 2;

// 2 % 2 는 0 > 0 은 암묵적으로 false 로 타입 변환
var result = x % 2 ? '홀수' : '짝수';

console.log(result);    // 짝수
```

#### 예제 07-22 ~ 07-24
삼항 연산자는 if...else 문가 동작이 비슷하다.
하지만 if..else 문은 표현식이 아닌 문이기 때문에 값처럼 사용할 수 없지만,
삼함 연산자는 표현식이기 때문에 값처럼 사용할 수 있다.

```
var x = 10;

var result = if (x % 2) { result = '홀수'; } else { result = '짝수'; }
// SyntaxError: Unexpected token if
```

## 7.5 논리 연산자
우항과 좌항의 피연산자를 논리 연산한다.

|논리 연산자|의미|
|:----:|:----:|
| ∣∣ |논리합(OR)|
| && |논리곱(AND)|
| ! |부정(NOT)|

#### 예제 07-25
``` 
// 일반적인 논리 연산과 동일함로 skip!
```

#### 예제 07-26
논리 부정(!) 연산자는 언제나 불리언 값을 반환한다.
피연산자가 불리언 값이 아닌 경우 불리언 타입으로 암묵적 타입 변환 된다.
``` 
!0;         // true
!'Hello';   // falase
```

#### 예제 07-27
논리 합(||), 논리 곱(&&) 연산자는 평가 결과가 불리언 값이 아닐 수 있다.
평가 결과는 두 피연산자 중 어느 한쪽으로 평가된다.
```
'Cat' && 'Dog'; // 'Dog'
```
> `9.4절 단축 평가` 참고

## 7.6 쉼표 연산자
쉼표 연산자는 왼쪽 피연산자 부터 차례대로 피연산자를 평가하고,
마지막 피연산자의 평가가 끝나면 마지막 피연산자의 평가 결과를 반환한다.

#### 예제 07-29
``` 
var x, y, z;

x = 1, y = 2, z = 3     // 3
```

## 7.7 그룹 연산자
그룹 연산자는 소괄호'()' 로 피연산자를 감싼다.
그룹 연산자는 연산자 우선순위가 가장 높아, 그룹 연산자의 피연산자의
표현식을 가장 먼저 평가하게 할 수 있다. 

#### 예제 07-30
```
10 * 2 + 3      // 23

10 * (2 + 3)    // 50
```

## 7.8 typeof 연산자
피연산자의 데이터 타입을 문자열로 반환한다.
7가지 문자열
"string", "number", "boolean", "undefined", "symbol", "object", "function"
중 하나를 반환한다.

#### 예제 07-31 ~ 07-32
``` 
typeof null     // object
typeof /test/gi // object

// 다른 예제는 예상 가능하므로 skip! 
```
위의 `typeof null` 의 경우 예상과 다르게 `null` 이 아닌 `object` 를 반환하므로 주의하자
> null 타입을 확인할 때는 typeof 연산자 대신 일치 연산자를 사용하자

#### 예제 07-33
선언하지 않은 식별자를 typeof 연산자로 연산하면 undefined 를 반환한다.
```
// 선언하지 않은 변수 undeclared
typeof undeclared;  // undefined
```

## 7.9 지수 연산자
좌항의 피연산자를 밑, 우항의 피연산자를 지수로 거듭 제곱하여 숫자 값을 반환한다.
> ES7에 도입되었다.

#### 예제 07-34 ~ 07-37
``` 
2 ** 2;         // 4
(-2) ** 2;      // 4
Math.pow(2, 2)  // 4, 지수 연산자 도입 전 지수 연산 메서드
```

#### 예제 07-38
다른 산술 연산자와 동일할게 할당 연산자와 사용 가능
``` 
var x = 2;
x **= 2
console.log(x)  // 4
```

#### 예제 07-39
이항 연산자들 중 가장 우선순위가 높다
``` 
2 * 5 ** 2  // 50, 100이 아니다.
```

## 7.10 그 외의 연산자
|논리 연산자|의미|참고|
|:----:|:----:|:---:|
| ?. |옵셔널 체이닝 연산자 |`9.4.2절 옵셔널 체이닝 연산자`|
| ?? |null 병합 연산자 |`9.4.3절 null 병합 연산자`|
| delete | 프로퍼티 삭제 |`10.8절 프로퍼티 삭제`|
| new | 프로퍼티 삭제 |`17.2.6절 new 연산자`|
| instanceof | 프로퍼티 삭제 |`19.10절 instanceof 연산자`|
| in | 프로퍼티 존재 확인 |`19.13.1절 in 연산자`|

## 7.11 연산자의 부수 효과
할당 연산자, 증가/감소 연산자, delete 연산자는 다른 코드에 영향을 주는 부수 효과가 있다.

#### 예제 07-40
``` 
var x;
x = 1;              // 할당 연산자
console.log(x)      // 1

x++;                // 증/감 연산자
console.log(x)      // 2

var o = { a: 1};
delete o.a;         // delete 연산자
console.log(o);     // { }
```

## 7.12 연산자 우선순위
여러 개의 연산자로 이루어진 문이 실행될 때, 
연산자들 중 우선순위가 높을수록 먼저 실행된다.

#### 예제 07-41
모든 연산자들의 우선순위를 외울 수 없으므로,
우선순위가 가장 높은 그룹 연산자를 사용하여 우선순위를 명시적으로 조절하는 것이 좋다.

## 7.13 연산자 결합 순서
연산자마다 연산자의 어느 쪽(우항/좌항)부터 평가를 수행할 것인지 정해져있다.

`연산자 결합 순서` 표 생략
